{"version":3,"sources":["../../src/utils/utils.js"],"names":["readdir","fs","unlink","deleteAllAvatars","absoluteFolderPath","files","unlinkPromises","map","filename","includes","console","log","Promise","all","err","isValidUrl","str","urlRegex","url","RegExp","length","test"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA,MAAMA,OAAO,GAAG,qBAAUC,YAAGD,OAAb,CAAhB;AACA,MAAME,MAAM,GAAG,qBAAUD,YAAGC,MAAb,CAAf;;AAEO,MAAMC,gBAAgB,GAAG,MAAOC,kBAAP,IAA8B;AAC5D,MAAI;AACF,UAAMC,KAAK,GAAG,MAAML,OAAO,CAACI,kBAAD,CAA3B;AACA,UAAME,cAAc,GAAGD,KAAK,CAACE,GAAN,CAAWC,QAAD,IAAc;AAC7C,UAAI,CAAC,CAAC,aAAD,EAAgB,aAAhB,EAA+B,aAA/B,EAA8CC,QAA9C,CAAuDD,QAAvD,CAAL,EAAuE;AACrEE,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCH,QAAjC;AACAN,QAAAA,MAAM,CAAE,GAAEE,kBAAmB,IAAGI,QAAS,EAAnC,CAAN;AACD;AACF,KALsB,CAAvB;AAMA,WAAOI,OAAO,CAACC,GAAR,CAAYP,cAAZ,CAAP;AACD,GATD,CASE,OAAOQ,GAAP,EAAY;AACZJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACD;AACF,CAbM;;;;AAeA,MAAMC,UAAU,GAAIC,GAAD,IAAS;AACjC,MAAIC,QAAQ,GACV,6YADF;AAEA,MAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAWF,QAAX,EAAqB,GAArB,CAAV;AACA,SAAOD,GAAG,CAACI,MAAJ,GAAa,IAAb,IAAqBF,GAAG,CAACG,IAAJ,CAASL,GAAT,CAA5B;AACD,CALM","sourcesContent":["import fs from 'fs';\nimport { promisify } from 'util';\nconst readdir = promisify(fs.readdir);\nconst unlink = promisify(fs.unlink);\n\nexport const deleteAllAvatars = async (absoluteFolderPath) => {\n  try {\n    const files = await readdir(absoluteFolderPath);\n    const unlinkPromises = files.map((filename) => {\n      if (!['avatar0.png', 'avatar1.png', 'avatar2.png'].includes(filename)) {\n        console.log('Deleting avatar: ', filename);\n        unlink(`${absoluteFolderPath}/${filename}`);\n      }\n    });\n    return Promise.all(unlinkPromises);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const isValidUrl = (str) => {\n  var urlRegex =\n    '^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$';\n  var url = new RegExp(urlRegex, 'i');\n  return str.length < 2083 && url.test(str);\n};\n"],"file":"utils.js"}